import"./modulepreload-polyfill-3cfb730f.js";import{createApp as o}from"https://unpkg.com/vue@3/dist/vue.esm-browser.js";let e="",s="";o({data(){return{apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"anan56",products:[],isNew:!1,tempProduct:{imagesUrl:[]}}},methods:{checkAdmin(){const a=`${this.apiUrl}/api/user/check`;axios.post(a).then(()=>{this.getData()}).catch(t=>{alert(t.data.message),window.location="index.html"})},getData(){const a=`${this.apiUrl}/api/${this.apiPath}/admin/products/all`;axios.get(a).then(t=>{this.products=t.data.products}).catch(t=>{alert(t.data.message)})},addData(){this.tempProduct={imagesUrl:[]},this.isNew=!0,e.show()},saveData(){if(this.isNew){const a=`${this.apiUrl}/api/${this.apiPath}/admin/product`;axios.post(a,{data:this.tempProduct}).then(t=>{console.log(t),this.getData()}).catch(t=>{t.response.data.message})}else{const a=`${this.apiUrl}/api/${this.apiPath}/admin/product/${this.tempProduct.id}`;axios.put(a,{data:this.tempProduct}).then(t=>{console.log(t),this.getData()}).catch(t=>{t.response.data.message})}this.tempProduct="",e.hide()},addImgs(){this.tempProduct.imagesUrl=[],this.tempProduct.imagesUrl.push("")},editData(a){this.tempProduct={...a},this.isNew=!1,e.show()},deleteShow(a){this.tempProduct={...a},s.show()},deleteProduct(){const a=`${this.apiUrl}/api/${this.apiPath}/admin/product/${this.tempProduct.id}`;axios.delete(a).then(t=>{console.log(t),s.hide(),this.getData()}).catch(t=>{t.response.data.message})}},mounted(){const a=document.cookie.replace(/(?:(?:^|.*;\s*)ananToken\s*=\s*([^;]*).*$)|^.*$/,"$1");axios.defaults.headers.common.Authorization=a,this.checkAdmin(),e=new bootstrap.Modal(document.getElementById("productModal"),{keyboard:!1}),s=new bootstrap.Modal(document.getElementById("delProductModal"),{keyboard:!1})}}).mount("#app");
